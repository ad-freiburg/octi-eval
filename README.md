# octi eval

Evaluation runs for octi paper.

This repo contains test line graphs for a simple test network, Freiburg, Vienna, Berlin and Stuttgart (to be extended). The Makefile is intended to run both octi's approximate octilinearization algorithm, generate the corresponding integer linear program (ILP) and do a solve with `gurobi` with, and without the approximate solution as a first feasible solution.

Evaluation runs are always for 3 different grid sizes: **75%**, **100%** and **125%** of the average distance between adjacent stations in the input line graph.

An installation of `octi` and `gurobi` (with valid license) has to be present on the system.

## Usage

The following targets are provided:

**`list`**: List all available networks in `./datasets`
**`help`**: Show this README.
**`render`**: Octilinearize all input line graphs in `./datasets` to `./render`.
**`ilp`**: Create all ILPs as `.mps` files and first feasible solutions generated by the approximate approach as `.mst` files.
**`ilp-solve`**: Solve the ILPs using the approximate first feasible solution.
**`ilp-solve-wos`**: Solve the ILPs *without* the approximate first feasible solution, meaning the solver has to finde a feasible solution by itself.
**`all`**: Render every input dataset, generate ILPs for every dataset and solve them with and without an approximate first feasible solution.

For additional targets, see the Makefile itself.

Log files are always written to the corresponding output directory and have the same name as the generated file, ending with `.log`.

### Parameters

The following parameters are read by the Makefile:

**`DATASETS`**: Datasets to use, whitespace separated. For each dataset, the line graph must be present at `./datasets/<dataset>.json`. By default, this is set to all networks in `dataset`.
**`OCTI`**: Path to the octi binary.
**`GUROBI_THREADS`** `(def=8)`: Number of threads gurobi should use.
**`GUROBI_TIMEOUT`** `(def=86400)`: Seconds after which the gurobi solve will be cancelled (in seconds, default is 24 hours).
**`GUROBI_NODEFILE_DIR`** `(def=.)`: To save memory, gurobi writes nodes to the disk after a memory threshold is reached.

### Usage examples

**`make all`**
Do everything, this will take a long time.

**`make DATASETS=freiburg render`**
Octilinearize the Freiburg dataset.

**`make DATASETS="freiburg stuttgart" ilp`**
Write ILPs for Freiburg and Stuttgart.

